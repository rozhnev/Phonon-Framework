{"version":3,"file":"selectbox.js","sources":["../../../src/js/common/events/dispatch.js","../../../src/js/common/utils/index.js","../../../src/js/common/events/index.js","../../../src/js/components/componentManager.js","../../../src/js/components/component.js","../../../src/js/components/selectbox/index.js"],"sourcesContent":["export function dispatchWinDocEvent(eventName, moduleName, detail = {}) {\n  const fullEventName = `${eventName}.ph.${moduleName}`;\n  window.dispatchEvent(new CustomEvent(fullEventName, { detail }));\n  document.dispatchEvent(new CustomEvent(fullEventName, { detail }));\n}\n\nexport function dispatchElementEvent(domElement, eventName, moduleName, detail = {}) {\n  const fullEventName = `${eventName}.ph.${moduleName}`;\n  domElement.dispatchEvent(new CustomEvent(fullEventName, { detail }));\n}\n\nexport function dispatchPageEvent(eventName, pageName, detail = {}) {\n  const fullEventName = `${pageName}.${eventName}`;\n  window.dispatchEvent(new CustomEvent(fullEventName, { detail }));\n  document.dispatchEvent(new CustomEvent(fullEventName, { detail }));\n}\n","\nexport function generateId() {\n  return Math.random().toString(36).substr(2, 10);\n}\n\nexport function findTargetByClass(target, parentClass) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.classList.contains(parentClass)) {\n      return target;\n    }\n  }\n\n  return null;\n}\n\nexport function findTargetById(target, parentId) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.getAttribute('id') === parentId) {\n      return target;\n    }\n  }\n\n  return null;\n}\n\nexport function findTargetByAttr(target, attr) {\n  for (; target && target !== document; target = target.parentNode) {\n    if (target.getAttribute(attr) !== null) {\n      return target;\n    }\n  }\n\n  return null;\n}\n\n/* eslint no-param-reassign: 0 */\nexport function createJqueryPlugin($ = null, name, obj) {\n  if (!$) {\n    return;\n  }\n\n  const mainFn = function (options = {}) {\n    const opts = options;\n    if (this[0]) {\n      opts.element = this[0];\n    }\n\n    return obj.DOMInterface(opts);\n  };\n\n  $.fn[name] = mainFn;\n  $.fn[name].Constructor = obj;\n  $.fn[name].noConflict = mainFn;\n}\n\nexport function sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\n","// @todo keep ?\nif (typeof window !== 'undefined') {\n  window.addEventListener('error', () => {\n    console.error('An error has occured! You can pen an issue here: https://github.com/quark-dev/Phonon-Framework/issues');\n  });\n}\n\n// Use available events\nlet availableEvents = ['mousedown', 'mousemove', 'mouseup'];\nlet touchScreen = false;\n\nif (typeof window !== 'undefined') {\n  if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n    touchScreen = true;\n    availableEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n  }\n\n  if (window.navigator.pointerEnabled) {\n    availableEvents = ['pointerdown', 'pointermove', 'pointerup', 'pointercancel'];\n  } else if (window.navigator.msPointerEnabled) {\n    availableEvents = ['MSPointerDown', 'MSPointerMove', 'MSPointerUp', 'MSPointerCancel'];\n  }\n}\n\nconst el = document.createElement('div');\nconst transitions = [\n  { name: 'transition', start: 'transitionstart', end: 'transitionend' },\n  { name: 'MozTransition', start: 'transitionstart', end: 'transitionend' },\n  { name: 'msTransition', start: 'msTransitionStart', end: 'msTransitionEnd' },\n  { name: 'WebkitTransition', start: 'webkitTransitionStart', end: 'webkitTransitionEnd' },\n];\nconst animations = [\n  { name: 'animation', start: 'animationstart', end: 'animationend' },\n  { name: 'MozAnimation', start: 'animationstart', end: 'animationend' },\n  { name: 'msAnimation', start: 'msAnimationStart', end: 'msAnimationEnd' },\n  { name: 'WebkitAnimation', start: 'webkitAnimationStart', end: 'webkitAnimationEnd' },\n];\n\nconst transitionStart = transitions.find(t => el.style[t.name] !== undefined).start;\nconst transitionEnd = transitions.find(t => el.style[t.name] !== undefined).end;\nconst animationStart = animations.find(t => el.style[t.name] !== undefined).start;\nconst animationEnd = animations.find(t => el.style[t.name] !== undefined).end;\n\nexport default {\n  // touch screen support\n  TOUCH_SCREEN: touchScreen,\n\n  // network\n  NETWORK_ONLINE: 'online',\n  NETWORK_OFFLINE: 'offline',\n  NETWORK_RECONNECTING: 'reconnecting',\n  NETWORK_RECONNECTING_SUCCESS: 'reconnect.success',\n  NETWORK_RECONNECTING_FAILURE: 'reconnect.failure',\n\n  // user interface states\n  SHOW: 'show',\n  SHOWN: 'shown',\n  HIDE: 'hide',\n  HIDDEN: 'hidden',\n\n  // hash\n  HASH: 'hash',\n\n  // touch, mouse and pointer events polyfill\n  START: availableEvents[0],\n  MOVE: availableEvents[1],\n  END: availableEvents[2],\n  CANCEL: typeof availableEvents[3] === 'undefined' ? null : availableEvents[3],\n\n  // click\n  CLICK: 'click',\n\n  // transitions\n  TRANSITION_START: transitionStart,\n  TRANSITION_END: transitionEnd,\n\n  // animations\n  ANIMATION_START: animationStart,\n  ANIMATION_END: animationEnd,\n\n  // selectbox\n  ITEM_SELECTED: 'itemSelected',\n};\n","\nconst getAttribute = (first, second) => {\n  if (first === '') {\n    return `data-${second}`;\n  }\n  return `data-${first}-${second}`;\n};\n\nexport function setAttributesConfig(element, obj = {}, attrs, start = '') {\n  const keys = Object.keys(obj);\n\n  keys.forEach((key) => {\n    if (start === '' && attrs.indexOf(key) === -1) {\n      // continue with next iteration\n      return;\n    }\n\n    if (typeof obj[key] === 'object' && obj[key] !== null) {\n      let keyStart = key;\n      if (start !== '') {\n        keyStart = `${start}-${key}`;\n      }\n\n      setAttributesConfig(element, obj[key], attrs, keyStart);\n      return;\n    }\n\n    const attr = getAttribute(start, key);\n    element.setAttribute(attr, obj[key]);\n  });\n}\n\nexport function getAttributesConfig(element, obj = {}, attrs, start = '') {\n  const newObj = Object.assign({}, obj);\n  const keys = Object.keys(obj);\n\n  keys.forEach((key) => {\n    if (start === '' && attrs.indexOf(key) === -1) {\n      // continue with next iteration\n      return;\n    }\n\n    if (obj[key] !== null && obj[key].constructor === Object) {\n      let keyStart = key;\n      if (start !== '') {\n        keyStart = `${start}-${key}`;\n      }\n\n      newObj[key] = getAttributesConfig(element, obj[key], attrs, keyStart);\n      return;\n    }\n\n    // update value\n    let value = obj[key]; // default value\n    const type = typeof value;\n    const attr = getAttribute(start, key);\n    const attrValue = element.getAttribute(attr);\n\n    if (attrValue !== null) {\n      if (type === 'boolean') {\n        // convert string to boolean\n        value = attrValue === 'true';\n      } else if (!Number.isNaN(attrValue)) {\n        value = parseInt(attrValue, 10);\n      } else {\n        value = attrValue;\n      }\n    }\n\n    newObj[key] = value;\n  });\n\n  return newObj;\n}\n\nconst stack = [];\n\nexport default {\n  add(component) {\n    stack.push(component);\n  },\n  remove(component) {\n    const index = stack.findIndex(c => Object.is(component, c));\n    if (index > -1) {\n      stack.splice(index, 1);\n    }\n  },\n  closable(component) {\n    return stack.length === 0 || Object.is(stack[stack.length - 1], component);\n  },\n};\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport { dispatchElementEvent, dispatchWinDocEvent } from '../common/events/dispatch';\nimport { generateId } from '../common/utils/index';\nimport Event from '../common/events';\nimport ComponentManager, { setAttributesConfig, getAttributesConfig } from './componentManager';\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nexport default class Component {\n  constructor(\n    name,\n    version,\n    defaultOptions = {},\n    options = {},\n    optionAttrs = [],\n    supportDynamicElement = false,\n    addToStack = false,\n  ) {\n    this.name = name;\n    this.version = version;\n    this.options = options;\n\n    Object.keys(defaultOptions).forEach((prop) => {\n      if (typeof this.options[prop] === 'undefined') {\n        this.options[prop] = defaultOptions[prop];\n      }\n    });\n\n    this.optionAttrs = optionAttrs;\n    this.supportDynamicElement = supportDynamicElement;\n    this.addToStack = addToStack;\n    this.id = generateId();\n\n    const checkElement = !this.supportDynamicElement || this.options.element !== null;\n\n    if (typeof this.options.element === 'string') {\n      this.options.element = document.querySelector(this.options.element);\n    }\n\n    if (checkElement && !this.options.element) {\n      throw new Error(`${this.name}. The element is not a HTMLElement.`);\n    }\n\n    this.dynamicElement = this.options.element === null;\n    this.registeredElements = [];\n\n    if (!this.dynamicElement) {\n      /**\n       * if the element exists, we read the data attributes config\n       * then we overwrite existing config keys defined in JavaScript, so that\n       * we keep the following order\n       * [1] default JavaScript configuration of the component\n       * [2] Data attributes configuration\n       * [3] JavaScript configuration\n       */\n      this.options = Object.assign(\n        this.options,\n        this.assignJsConfig(this.getAttributes(), this.options),\n      );\n\n      // then, set the new data attributes to the element\n      this.setAttributes();\n    }\n\n    this.elementListener = event => this.onBeforeElementEvent(event);\n  }\n\n  assignJsConfig(attrConfig, jsConfig) {\n    const config = attrConfig;\n    this.optionAttrs.forEach((key) => {\n      if (typeof jsConfig[key] !== 'undefined') {\n        config[key] = jsConfig[key];\n      }\n    });\n\n    return config;\n  }\n\n  getVersion() {\n    return this.version;\n  }\n\n  getElement() {\n    return this.options.element;\n  }\n\n  getId() {\n    return this.id;\n  }\n\n  registerElements(elements) {\n    elements.forEach(element => this.registerElement(element));\n  }\n\n  registerElement(element) {\n    element.target.addEventListener(element.event, this.elementListener);\n    this.registeredElements.push(element);\n  }\n\n  unregisterElements() {\n    this.registeredElements.forEach((element) => {\n      this.unregisterElement(element);\n    });\n  }\n\n  unregisterElement(element) {\n    const registeredElementIndex = this.registeredElements\n      .findIndex(el => el.target === element.target && el.event === element.event);\n\n    if (registeredElementIndex > -1) {\n      element.target.removeEventListener(element.event, this.elementListener);\n      this.registeredElements.splice(registeredElementIndex, 1);\n    } else {\n      console.error(`Warning! Unknown registered element: ${element.target} with event: ${element.event}.`);\n    }\n  }\n\n  triggerEvent(eventName, detail = {}, objectEventOnly = false) {\n    if (typeof eventName !== 'string') {\n      throw new Error('The event name is not valid.');\n    }\n\n    if (this.addToStack) {\n      if (eventName === Event.SHOW) {\n        ComponentManager.add(this);\n      } else if (eventName === Event.HIDE) {\n        ComponentManager.remove(this);\n      }\n    }\n\n    // event names can be with dot notation like reconnecting.success\n    const eventNameObject = eventName.split('.').reduce((acc, current, index) => {\n      if (index === 0) {\n        return current;\n      }\n\n      return acc + current.charAt(0).toUpperCase() + current.slice(1);\n    });\n\n    const eventNameAlias = `on${eventNameObject.charAt(0).toUpperCase()}${eventNameObject.slice(1)}`;\n\n    // object event\n    if (typeof this.options[eventNameObject] === 'function') {\n      this.options[eventNameObject].apply(this, [detail]);\n    }\n\n    if (typeof this.options[eventNameAlias] === 'function') {\n      this.options[eventNameAlias].apply(this, [detail]);\n    }\n\n    if (objectEventOnly) {\n      return;\n    }\n\n    // dom event\n    if (this.options.element) {\n      dispatchElementEvent(this.options.element, eventName, this.name, detail);\n    } else {\n      dispatchWinDocEvent(eventName, this.name, detail);\n    }\n  }\n\n  setAttributes() {\n    if (this.optionAttrs.length > 0) {\n      setAttributesConfig(this.options.element, this.options, this.optionAttrs);\n    }\n  }\n\n  getAttributes() {\n    const options = Object.assign({}, this.options);\n    return getAttributesConfig(this.options.element, options, this.optionAttrs);\n  }\n\n  /**\n   * the preventClosable method manages concurrency between active components.\n   * For example, if there is a shown off-canvas and modal, the last\n   * shown component gains the processing priority\n   */\n  preventClosable() {\n    return this.addToStack && !ComponentManager.closable(this);\n  }\n\n  onBeforeElementEvent(event) {\n    if (this.preventClosable()) {\n      return;\n    }\n\n    this.onElementEvent(event);\n  }\n\n  /**\n   * @emits {Event} emit events registered by the component\n   * @param {Event} event\n   */\n  onElementEvent() {\n    /* eslint class-methods-use-this: 0 */\n  }\n\n  static identifier() {\n    return this.name;\n  }\n\n  static DOMInterface(ComponentClass, options) {\n    return new ComponentClass(options);\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Licensed under MIT (https://github.com/quark-dev/Phonon-Framework/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\nimport Component from '../component';\nimport Event from '../../common/events';\nimport { findTargetByClass } from '../../common/utils';\nimport { getAttributesConfig } from '../componentManager';\n\nconst Selectbox = (() => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME = 'selectbox';\n  const VERSION = '2.0.0';\n  const DEFAULT_PROPERTIES = {\n    element: null,\n    selectable: true,\n    search: false,\n    filterItems: null,\n  };\n  const DATA_ATTRS_PROPERTIES = [\n    'selectable',\n    'search',\n  ];\n\n  /**\n   * ------------------------------------------------------------------------\n   * Class Definition\n   * ------------------------------------------------------------------------\n   */\n\n  class Selectbox extends Component {\n    constructor(options = {}) {\n      super(NAME, VERSION, DEFAULT_PROPERTIES, options, DATA_ATTRS_PROPERTIES, false, false);\n\n      const selected = this.options.element.querySelector('[data-selected]');\n      const item = this.getItemData(selected);\n\n      this.setSelected(item.value, item.text, false);\n    }\n\n    setSelected(value = '', text = null, checkExists = true) {\n      if (!this.options.selectable) {\n        return false;\n      }\n\n      let textDisplay = text;\n      this.options.element.querySelector('.default-text').innerHTML = text;\n      this.options.element.querySelector('input[type=\"hidden\"]').value = value;\n\n      const items = this.options.element.querySelectorAll('.item') || [];\n      let itemFound = false;\n\n      Array.from(items).forEach((item) => {\n        if (item.classList.contains('selected')) {\n          item.classList.remove('selected');\n        }\n\n        const data = this.getItemData(item);\n\n        if (value === data.value) {\n          if (!item.classList.contains('selected')) {\n            item.classList.add('selected');\n          }\n\n          textDisplay = data.text;\n          itemFound = true;\n        }\n      });\n\n      if (checkExists && itemFound) {\n        this.options.element.querySelector('.default-text').innerHTML = textDisplay;\n      } else if (checkExists && !itemFound) {\n        throw new Error(`${NAME}. The value \"${value}\" does not exist in the list of items.`);\n      }\n\n      return true;\n    }\n\n    getSelected() {\n      return this.options.element.querySelector('input[type=\"hidden\"]').value;\n    }\n\n    getItemData(item = null) {\n      let text = '';\n      let value = '';\n\n      if (item) {\n        text = item.getAttribute('data-text') || item.innerHTML;\n\n        const selectedTextNode = item.querySelector('.text');\n        if (selectedTextNode) {\n          text = selectedTextNode.innerHTML;\n        }\n\n        value = item.getAttribute('data-value') || '';\n      }\n\n      return { text, value };\n    }\n\n    onElementEvent(event) {\n      if (event.type === Event.START) {\n        const selectbox = findTargetByClass(event.target, 'selectbox');\n\n        /*\n         * hide the current selectbox only if the event concerns another selectbox\n         * hide also if the user clicks outside a selectbox\n         */\n        if (!selectbox || selectbox !== this.getElement()) {\n          this.hide();\n        }\n      } else if (event.type === 'click') {\n        const item = findTargetByClass(event.target, 'item');\n\n        if (item) {\n          if (item.classList.contains('disabled')) {\n            return;\n          }\n\n          const itemInfo = this.getItemData(item);\n\n          if (this.getSelected() !== itemInfo.value) {\n            // the user selected another value, we dispatch the event\n            this.setSelected(itemInfo.value, itemInfo.text, false);\n            const detail = { item, text: itemInfo.text, value: itemInfo.value };\n            this.triggerEvent(Event.ITEM_SELECTED, detail);\n          }\n\n          this.hide();\n          return;\n        }\n\n        // don't toggle the selectbox if the event concerns headers, dividers\n        const selectboxMenu = findTargetByClass(event.target, 'selectbox-menu');\n        if (selectboxMenu) {\n          return;\n        }\n\n        this.toggle();\n      }\n    }\n\n    toggle() {\n      if (this.options.element.classList.contains('active')) {\n        return this.hide();\n      }\n\n      return this.show();\n    }\n\n    /**\n     * Shows the selectbox\n     * @returns {Promise} Promise object represents the completed animation\n     */\n    async show() {\n      if (this.options.element.classList.contains('active')) {\n        return false;\n      }\n\n      this.options.element.classList.add('active');\n\n      const selectboxMenu = this.options.element.querySelector('.selectbox-menu');\n\n      // scroll to top\n      selectboxMenu.scrollTop = 0;\n\n      this.triggerEvent(Event.SHOW);\n      this.triggerEvent(Event.SHOWN);\n\n      this.registerElement({ target: selectboxMenu, event: 'click' });\n      this.registerElement({ target: document.body, event: Event.START });\n\n      return true;\n    }\n\n    /**\n     * Hides the selectbox\n     * @returns {Promise} Promise object represents the completed animation\n     */\n    async hide() {\n      if (!this.options.element.classList.contains('active')) {\n        throw new Error('The selectbox is not active');\n      }\n\n      this.options.element.classList.remove('active');\n\n      this.triggerEvent(Event.HIDE);\n      this.triggerEvent(Event.HIDDEN);\n\n      this.unregisterElement({ target: this.options.element.querySelector('.selectbox-menu'), event: 'click' });\n      this.unregisterElement({ target: document.body, event: Event.START });\n\n      return true;\n    }\n\n    static identifier() {\n      return NAME;\n    }\n\n    static DOMInterface(options) {\n      return super.DOMInterface(Selectbox, options);\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * DOM Api implementation\n   * ------------------------------------------------------------------------\n   */\n  const components = [];\n\n  const selectboxes = Array.from(document.querySelectorAll(`.${NAME}`) || []);\n  selectboxes.filter(d => !d.classList.contains('nav-item')).forEach((element) => {\n    const config = getAttributesConfig(element, DEFAULT_PROPERTIES, DATA_ATTRS_PROPERTIES);\n    config.element = element;\n\n    if (!config.search) {\n      components.push(new Selectbox(config));\n    }\n  });\n\n  document.addEventListener('click', (event) => {\n    const selectboxMenu = findTargetByClass(event.target, 'selectbox-menu');\n    if (selectboxMenu) {\n      return;\n    }\n\n    const selectbox = findTargetByClass(event.target, 'selectbox');\n\n    if (selectbox) {\n      const dataToggleAttr = selectbox.getAttribute('data-toggle');\n      if (dataToggleAttr && dataToggleAttr === NAME && selectbox) {\n        const component = components.find(c => c.getElement() === selectbox);\n\n        if (!component) {\n          return;\n        }\n\n        component.toggle();\n      }\n    }\n  });\n\n  return Selectbox;\n})();\n\nexport default Selectbox;\n"],"names":["dispatchWinDocEvent","eventName","moduleName","detail","fullEventName","window","dispatchEvent","CustomEvent","document","dispatchElementEvent","domElement","generateId","Math","random","toString","substr","findTargetByClass","target","parentClass","parentNode","classList","contains","addEventListener","console","error","availableEvents","touchScreen","DocumentTouch","navigator","pointerEnabled","msPointerEnabled","el","createElement","transitions","name","start","end","animations","transitionStart","find","t","style","undefined","transitionEnd","animationStart","animationEnd","TOUCH_SCREEN","NETWORK_ONLINE","NETWORK_OFFLINE","NETWORK_RECONNECTING","NETWORK_RECONNECTING_SUCCESS","NETWORK_RECONNECTING_FAILURE","SHOW","SHOWN","HIDE","HIDDEN","HASH","START","MOVE","END","CANCEL","CLICK","TRANSITION_START","TRANSITION_END","ANIMATION_START","ANIMATION_END","ITEM_SELECTED","getAttribute","first","second","setAttributesConfig","element","obj","attrs","keys","Object","forEach","key","indexOf","keyStart","attr","setAttribute","getAttributesConfig","newObj","assign","constructor","value","type","attrValue","Number","isNaN","parseInt","stack","add","component","push","remove","index","findIndex","c","is","splice","closable","length","Component","version","defaultOptions","options","optionAttrs","supportDynamicElement","addToStack","prop","id","checkElement","querySelector","Error","dynamicElement","registeredElements","assignJsConfig","getAttributes","setAttributes","elementListener","event","onBeforeElementEvent","attrConfig","jsConfig","config","getVersion","getElement","getId","registerElements","elements","registerElement","unregisterElements","unregisterElement","registeredElementIndex","removeEventListener","triggerEvent","objectEventOnly","Event","ComponentManager","eventNameObject","split","reduce","acc","current","charAt","toUpperCase","slice","eventNameAlias","apply","preventClosable","onElementEvent","identifier","DOMInterface","ComponentClass","Selectbox","NAME","VERSION","DEFAULT_PROPERTIES","selectable","search","filterItems","DATA_ATTRS_PROPERTIES","selected","item","getItemData","setSelected","text","checkExists","textDisplay","innerHTML","items","querySelectorAll","itemFound","Array","from","data","getSelected","selectedTextNode","selectbox","hide","itemInfo","selectboxMenu","toggle","show","scrollTop","body","components","selectboxes","filter","d","dataToggleAttr"],"mappings":"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"}